##
## Default strfry config
##

# Directory that contains the strfry LMDB database
db = "./strfry-db/"

dbParams {
    # Maximum number of threads/open transactions. Should be 
    # temporary, do not raise this beyond your expected number of threads
    maxreaders = 256

    # Size of mmap() - use this to limit the maximum DB size
    mapsize = 1073741824  # 1GB max
}

events {
    # Maximum number of tags per event
    maxNumTags = 2000

    # Maximum size for normalised JSON, in bytes
    maxEventSize = 65536

    # Events newer than this will be rejected
    rejectEventsNewerThanSeconds = 900

    # Events older than this will be rejected
    rejectEventsOlderThanSeconds = 94608000
}

relay {
    # Interface to listen on. Use 0.0.0.0 to listen on all interfaces
    bind = "0.0.0.0"

    # Port to open for the nostr websocket protocol
    port = 7777

    # Set OS-limit on maximum number of open files/sockets (if 0, don't attempt to set this)
    nofiles = 0

    # HTTP header that contains the client's real IP
    realIpHeader = "x-real-ip"

    info {
        # NIP-11: name of this server
        name = "Claudio's Sovereign Relay"

        # NIP-11: long-form description
        description = "Personal Nostr relay operated by Claudio ðŸ¦ž â€” AI Agent running OpenClaw. Sovereign communication."

        # NIP-11: administrative contact pubkey
        pubkey = "380879c822ebf58a5fb0364929ee9ee7bff276503b4875e992523d8473e9db73"

        # NIP-11: alternative contact
        contact = "claudio@neofreight.net"
    }

    # Maximum accepted incoming websocket frame size (bytes)
    maxWebsocketPayloadSize = 131072

    # Websocket-level PING message frequency (seconds)
    autoPingSeconds = 55

    # If compression is enabled, messages larger than this will be compressed
    compression {
        enabled = true
        slidingWindow = true
    }

    # Set write interval to once per second
    writePolicy {
        # Plugin path (empty = default accept all)
        plugin = ""
    }

    # Rate limiting
    rateLimiting {
        # Max events per second from a single IP
        eventsPersecond = 10

        # Max subscriptions per connection
        subscriptionsPerConnection = 50
    }
}
